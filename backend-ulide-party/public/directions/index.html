<html>
<head>
  <title>Directions Service</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

  <link rel="stylesheet" type="text/css" href="./style.css" />
</head>
<body>
<div id="floating-panel">
  <b>Mode of Travel: </b>
  <select id="mode">
    <option value="DRIVING">Driving</option>
    <option value="WALKING">Walking</option>
    <option value="BICYCLING">Bicycling</option>
    <option value="TRANSIT">Transit</option>
  </select>
</div>
<div id="map"></div>

<!--
 The `defer` attribute causes the callback to execute after the full HTML
 document has been parsed. For non-blocking uses, avoiding race conditions,
 and consistent behavior across browsers, consider loading using Promises
 with https://www.npmjs.com/package/@googlemaps/js-api-loader.
-->
<script>

  async function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(await senPosition);
    } else {
      x.innerHTML = "Geolocation is not supported by this browser.";
    }
  }

  async function senPosition(position) {
    console.log(position.coords.latitude.toString(), position.coords.longitude.toString())
    await localStorage.setItem('user_latitude', position.coords.latitude.toString());
    await localStorage.setItem('user_longitude', position.coords.longitude.toString());
  }

  getLocation()
</script>
<script type="module" src="./index.js"></script>
<script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDk31YFxoBBRi15FKVX3-9rF-Vr8vpGfSQ&callback=initMap&v=weekly"
        defer
></script>
</body>
</html>

